{"ast":null,"code":"var _jsxFileName = \"/Users/kavyashreechandrashekar/Desktop/CMPE-273/Lab2/UI/grubhub/src/components/Owner/Message.js\";\nimport React, { Component } from \"react\";\nimport Navigation from \"../Navbar\";\nimport { connect } from \"react-redux\";\nimport * as actionCreators from \"../../js/actions/index\";\nimport { Container, Col, Row, Button, Form, Toast } from \"react-bootstrap\";\nimport \"../../css/grubhub.css\";\n\nclass Message extends Component {\n  constructor(props) {\n    super();\n\n    this.handleChange = event => {\n      this.setState({\n        message: event.target.value\n      });\n    };\n\n    this.onSend = event => {\n      if (this.state.message.trim().length > 0) {\n        let rId = \"\";\n        let recieverName = \"\";\n\n        if (this.state.restaurant._id) {\n          rId = this.state.restaurant._id;\n          recieverName = this.state.restaurant.name;\n        } else {\n          rId = this.state.restaurantId;\n          recieverName = this.state.recieverName;\n        }\n\n        let data = {\n          recieverId: rId,\n          senderId: this.state.userId,\n          senderName: this.props.user.firstName,\n          recieverName: recieverName,\n          message: this.state.message\n        };\n        console.log(data);\n        this.setState({\n          message: \"\"\n        });\n        this.props.sendMessages(data);\n      }\n    };\n\n    this.messageDesc = messages => {\n      let toast = messages[0].messages.map(message => {\n        return React.createElement(Toast, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }, React.createElement(Toast.Header, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, \"Sent: \", message.sent), React.createElement(Toast.Body, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, message.message));\n      });\n      return toast;\n    };\n\n    this.restaurantMessages = messages => {\n      let toast = messages.map(message => {\n        if (message.recieverId === this.state.restaurant._id || message.senderId === this.state.restaurant._id) {\n          let mes = message.messages.map(message => {\n            return React.createElement(Toast, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 95\n              },\n              __self: this\n            }, React.createElement(Toast.Header, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 96\n              },\n              __self: this\n            }, \"Sent: \", message.sent), React.createElement(Toast.Body, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 97\n              },\n              __self: this\n            }, message.message));\n          });\n          return mes;\n        }\n      });\n      return toast;\n    };\n\n    this.clickMessageList = message => event => {\n      console.log(message);\n      let rId = \"\";\n      let recieverName = \"\";\n\n      if (message.senderId !== this.state.userId) {\n        rId = message.senderId;\n        recieverName = message.senderName;\n      } else {\n        rId = message.recieverId;\n        recieverName = message.recieverName;\n      }\n\n      this.setState({\n        active: true,\n        selectedList: message,\n        restaurant: {},\n        restaurantId: rId,\n        recieverName: recieverName\n      });\n    };\n\n    this.viewMessage = selectedList => {\n      let mess = selectedList.messages.map(message => {\n        return React.createElement(Toast, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        }, React.createElement(Toast.Header, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        }, \"Sent: \", message.sent), React.createElement(Toast.Body, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        }, message.message));\n      });\n      return mess;\n    };\n\n    this.state = {\n      user: {},\n      message: \"\",\n      userId: \"\",\n      active: false,\n      selectedList: null,\n      recieverId: \"\"\n    };\n  }\n\n  componentWillMount() {\n    if (!localStorage.getItem(\"jwtToken\")) {\n      localStorage.removeItem(\"email\");\n      localStorage.removeItem(\"password\");\n      this.props.history.push(\"/SignIn\");\n    }\n\n    console.log(this.props.location.state);\n\n    if (this.props.location.state) {\n      this.setState({\n        user: this.props.location.state.user\n      });\n    }\n\n    console.log(this.state);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let newUser = nextProps.user;\n\n    if (newUser !== this.props.user && newUser !== undefined) {\n      this.props.getMessages(newUser._id);\n      this.setState({\n        userId: newUser._id\n      });\n    }\n  }\n\n  render() {\n    let messageList = this.props.message.map(message => {\n      return React.createElement(\"div\", {\n        onClick: this.clickMessageList(message),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, message.recieverName, React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }));\n    });\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(Navigation, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(Col, {\n      className: \"col-sm-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"vertical-menu bg-light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"/user/PastOrders\",\n      className: \"header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, \"Messages\")), React.createElement(\"a\", {\n      href: \"/UserHome\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"Home\"), React.createElement(\"a\", {\n      href: \"/user/upcomingOrders\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, \"Upcoming orders\"), React.createElement(\"a\", {\n      href: \"/user/Messages\",\n      className: \"active\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, \"Messages\"), React.createElement(\"a\", {\n      href: \"/Profile\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, \"Profile\"), React.createElement(\"a\", {\n      href: \"/user/AddressAndPhone\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"Address and phone\"), React.createElement(\"a\", {\n      href: \"/user/PastOrders\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, \"Past orders\"))), React.createElement(Col, {\n      className: \"col-sm-9\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(Col, {\n      className: \"col-sm-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"vertical-menu\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"/user/PastOrders\",\n      className: \"header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, \"Message List\")), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, this.state.restaurant.name ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, this.state.restaurant.name), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, this.props.message.length > 0 ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, messageList) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }))) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, this.props.message.length > 0 ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, messageList) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, \"No messages\")))))), React.createElement(\"div\", {\n      style: {\n        borderLeft: \"4px solid black\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }), React.createElement(Col, {\n      className: \"col-sm-7\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"vertical-menu\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, this.state.restaurant.name ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, this.state.restaurant.name), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        minHeight: \"600 px\",\n        width: \"100%\",\n        border: \"1px black\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, this.props.message.find(message => message.recieverId === this.state.restaurant._id) ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, this.restaurantMessages(this.props.message)) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, \"No Previous Messages\")), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }), React.createElement(Form, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, React.createElement(Col, {\n      className: \"col-sm-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, React.createElement(Form.Control, {\n      placeholder: \"type message....\",\n      name: \"message\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    })), React.createElement(Col, {\n      className: \"col-sm-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.onSend,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, \"Send\"))))) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, this.props.message.length > 0 ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, \"View Messages\")), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, this.state.selectedList ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, this.viewMessage(this.state.selectedList), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }), React.createElement(Form, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }, React.createElement(Col, {\n      className: \"col-sm-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }, React.createElement(Form.Control, {\n      placeholder: \"type message....\",\n      name: \"message\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    })), React.createElement(Col, {\n      className: \"col-sm-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.onSend,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272\n      },\n      __self: this\n    }, \"Send\")))))) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    }, \"Select from List\"))) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286\n      },\n      __self: this\n    }, \"No messages\")))))))));\n  }\n\n}\n\nfunction mapStoreToProps(state) {\n  return {\n    message: state.userDetails.messages,\n    user: state.userDetails.userProfile\n  };\n}\n\nexport default connect(mapStoreToProps, actionCreators)(Message);","map":{"version":3,"sources":["/Users/kavyashreechandrashekar/Desktop/CMPE-273/Lab2/UI/grubhub/src/components/Owner/Message.js"],"names":["React","Component","Navigation","connect","actionCreators","Container","Col","Row","Button","Form","Toast","Message","constructor","props","handleChange","event","setState","message","target","value","onSend","state","trim","length","rId","recieverName","restaurant","_id","name","restaurantId","data","recieverId","senderId","userId","senderName","user","firstName","console","log","sendMessages","messageDesc","messages","toast","map","sent","restaurantMessages","mes","clickMessageList","active","selectedList","viewMessage","mess","componentWillMount","localStorage","getItem","removeItem","history","push","location","componentWillReceiveProps","nextProps","newUser","undefined","getMessages","render","messageList","borderLeft","minHeight","width","border","find","mapStoreToProps","userDetails","userProfile"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Navigation from \"../Navbar\";\nimport { connect } from \"react-redux\";\nimport * as actionCreators from \"../../js/actions/index\";\nimport { Container, Col, Row, Button, Form, Toast } from \"react-bootstrap\";\nimport \"../../css/grubhub.css\";\n\nclass Message extends Component {\n  constructor(props) {\n    super();\n    this.state = {\n      user: {},\n      message: \"\",\n      userId: \"\",\n      active: false,\n      selectedList: null,\n      recieverId: \"\"\n    };\n  }\n  componentWillMount() {\n    if (!localStorage.getItem(\"jwtToken\")) {\n      localStorage.removeItem(\"email\");\n      localStorage.removeItem(\"password\");\n      this.props.history.push(\"/SignIn\");\n    }\n    console.log(this.props.location.state);\n    if (this.props.location.state) {\n      this.setState({\n        user: this.props.location.state.user\n      });\n    }\n    console.log(this.state);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let newUser = nextProps.user;\n    if (newUser !== this.props.user && newUser !== undefined) {\n      this.props.getMessages(newUser._id);\n      this.setState({\n        userId: newUser._id\n      });\n    }\n  }\n  handleChange = event => {\n    this.setState({\n      message: event.target.value\n    });\n  };\n\n  onSend = event => {\n    if (this.state.message.trim().length > 0) {\n      let rId = \"\";\n      let recieverName = \"\";\n      if (this.state.restaurant._id) {\n        rId = this.state.restaurant._id;\n        recieverName = this.state.restaurant.name;\n      } else {\n        rId = this.state.restaurantId;\n        recieverName = this.state.recieverName;\n      }\n\n      let data = {\n        recieverId: rId,\n        senderId: this.state.userId,\n        senderName: this.props.user.firstName,\n        recieverName: recieverName,\n        message: this.state.message\n      };\n      console.log(data);\n      this.setState({ message: \"\" });\n      this.props.sendMessages(data);\n    }\n  };\n\n  messageDesc = messages => {\n    let toast = messages[0].messages.map(message => {\n      return (\n        <Toast>\n          <Toast.Header>Sent: {message.sent}</Toast.Header>\n          <Toast.Body>{message.message}</Toast.Body>\n        </Toast>\n      );\n    });\n    return toast;\n  };\n\n  restaurantMessages = messages => {\n    let toast = messages.map(message => {\n      if (\n        message.recieverId === this.state.restaurant._id ||\n        message.senderId === this.state.restaurant._id\n      ) {\n        let mes = message.messages.map(message => {\n          return (\n            <Toast>\n              <Toast.Header>Sent: {message.sent}</Toast.Header>\n              <Toast.Body>{message.message}</Toast.Body>\n            </Toast>\n          );\n        });\n        return mes;\n      }\n    });\n    return toast;\n  };\n\n  clickMessageList = message => event => {\n    console.log(message);\n    let rId = \"\";\n    let recieverName = \"\";\n    if (message.senderId !== this.state.userId) {\n      rId = message.senderId;\n      recieverName = message.senderName;\n    } else {\n      rId = message.recieverId;\n      recieverName = message.recieverName;\n    }\n    this.setState({\n      active: true,\n      selectedList: message,\n      restaurant: {},\n      restaurantId: rId,\n      recieverName: recieverName\n    });\n  };\n  viewMessage = selectedList => {\n    let mess = selectedList.messages.map(message => {\n      return (\n        <Toast>\n          <Toast.Header>Sent: {message.sent}</Toast.Header>\n          <Toast.Body>{message.message}</Toast.Body>\n        </Toast>\n      );\n    });\n    return mess;\n  };\n\n  render() {\n    let messageList = this.props.message.map(message => {\n      return (\n        <div onClick={this.clickMessageList(message)}>\n          {message.recieverName}\n          <hr />\n        </div>\n      );\n    });\n\n    return (\n      <div>\n        <Navigation></Navigation>\n        <Row>\n          <Col className=\"col-sm-3\">\n            <div className=\"vertical-menu bg-light\">\n              <a href=\"/user/PastOrders\" className=\"header\">\n                <h2>Messages</h2>\n              </a>\n              <a href=\"/UserHome\">Home</a>\n              <a href=\"/user/upcomingOrders\">Upcoming orders</a>\n              <a href=\"/user/Messages\" className=\"active\">\n                Messages\n              </a>\n              <a href=\"/Profile\">Profile</a>\n              <a href=\"/user/AddressAndPhone\">Address and phone</a>\n              <a href=\"/user/PastOrders\">Past orders</a>\n            </div>\n          </Col>\n          <Col className=\"col-sm-9\">\n            <Row>\n              <Col className=\"col-sm-4\">\n                <Container>\n                  <div className=\"vertical-menu\">\n                    <a href=\"/user/PastOrders\" className=\"header\">\n                      <h2>Message List</h2>\n                    </a>\n                    <hr />\n                    <div>\n                      {this.state.restaurant.name ? (\n                        <div>\n                          <div>{this.state.restaurant.name}</div>\n                          <hr />\n                          <div>\n                            {this.props.message.length > 0 ? (\n                              <div>{messageList}</div>\n                            ) : (\n                              <div></div>\n                            )}\n                          </div>\n                        </div>\n                      ) : (\n                        <div>\n                          {this.props.message.length > 0 ? (\n                            <div>{messageList}</div>\n                          ) : (\n                            <div>No messages</div>\n                          )}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </Container>\n              </Col>\n              <div\n                style={{\n                  borderLeft: \"4px solid black\"\n                }}\n              ></div>\n              <Col className=\"col-sm-7\">\n                <Container>\n                  <div className=\"vertical-menu\">\n                    {this.state.restaurant.name ? (\n                      <div>\n                        <h2>{this.state.restaurant.name}</h2>\n                        <hr />\n                        <div\n                          style={{\n                            minHeight: \"600 px\",\n                            width: \"100%\",\n                            border: \"1px black\"\n                          }}\n                        >\n                          {this.props.message.find(\n                            message =>\n                              message.recieverId === this.state.restaurant._id\n                          ) ? (\n                            <div>\n                              {this.restaurantMessages(this.props.message)}\n                            </div>\n                          ) : (\n                            <div>No Previous Messages</div>\n                          )}\n                        </div>\n                        <hr />\n                        <Form>\n                          <Row>\n                            <Col className=\"col-sm-10\">\n                              <Form.Control\n                                placeholder=\"type message....\"\n                                name=\"message\"\n                                onChange={this.handleChange}\n                              ></Form.Control>\n                            </Col>\n                            <Col className=\"col-sm-2\">\n                              <Button onClick={this.onSend}>Send</Button>\n                            </Col>\n                          </Row>\n                        </Form>\n                      </div>\n                    ) : (\n                      <div>\n                        {this.props.message.length > 0 ? (\n                          <div>\n                            <a>\n                              <h2>View Messages</h2>\n                            </a>\n                            <hr />\n                            <div>\n                              {this.state.selectedList ? (\n                                <div>\n                                  {this.viewMessage(this.state.selectedList)}\n                                  <div>\n                                    <hr />\n                                    <Form>\n                                      <Row>\n                                        <Col className=\"col-sm-10\">\n                                          <Form.Control\n                                            placeholder=\"type message....\"\n                                            name=\"message\"\n                                            onChange={this.handleChange}\n                                          ></Form.Control>\n                                        </Col>\n                                        <Col className=\"col-sm-2\">\n                                          <Button onClick={this.onSend}>\n                                            Send\n                                          </Button>\n                                        </Col>\n                                      </Row>\n                                    </Form>\n                                  </div>\n                                </div>\n                              ) : (\n                                <div>Select from List</div>\n                              )}\n                            </div>\n                          </div>\n                        ) : (\n                          <div>No messages</div>\n                        )}\n                      </div>\n                    )}\n                  </div>\n                </Container>\n              </Col>\n            </Row>\n          </Col>\n        </Row>\n      </div>\n    );\n  }\n}\nfunction mapStoreToProps(state) {\n  return {\n    message: state.userDetails.messages,\n    user: state.userDetails.userProfile\n  };\n}\nexport default connect(\n  mapStoreToProps,\n  actionCreators\n)(Message);\n"]},"metadata":{},"sourceType":"module"}